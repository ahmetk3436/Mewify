{
  "tasks": [
    {
      "id": "enhance_004",
      "title": "Backend: Fix Compilation — Wire UsageService + DailyUsage Migration",
      "description": "CRITICAL BUG: The backend will NOT compile because of a signature mismatch in cmd/server/main.go.\n\n1. main.go line 53 calls `handlers.NewAiAnalysisHandler(aiAnalysisService)` with 1 arg, but the handler at internal/handlers/ai_analysis_handler.go line 16 requires 2 args: `NewAiAnalysisHandler(service *services.AiAnalysisService, usageService *services.UsageService)`.\n\nFIX main.go:\n- Create `usageService := services.NewUsageService(database.DB)` after line 43 (after other services).\n- Create `usageHandler := handlers.NewUsageHandler(usageService)` after line 53.\n- Change line 53 to `aiAnalysisHandler := handlers.NewAiAnalysisHandler(aiAnalysisService, usageService)`.\n\n2. Register the UsageHandler route in routes/routes.go:\n- Add `usageHandler *handlers.UsageHandler` parameter to `Setup()` function.\n- Add route: `protected.Get(\"/usage/remaining\", usageHandler.GetRemaining)`.\n- Update the `routes.Setup(...)` call in main.go to pass `usageHandler`.\n\n3. Add `DailyUsage` model to AutoMigrate in internal/database/database.go:\n- Import is already available since models package is imported.\n- Add `&models.DailyUsage{}` to the `DB.AutoMigrate(...)` call after `&models.GlowPlan{}`.\n\nFiles to modify:\n- backend/cmd/server/main.go\n- backend/internal/routes/routes.go\n- backend/internal/database/database.go",
      "status": "pending",
      "priority": 10,
      "depends_on": [],
      "test_command": "cd backend && go build ./...",
      "auto_commit": true,
      "created_at": "2026-02-07T00:00:00Z",
      "updated_at": "2026-02-07T00:00:00Z"
    },
    {
      "id": "enhance_005",
      "title": "Mobile: Replace Protected Layout Tabs with Slot + Custom Tab Bar",
      "description": "CRITICAL: The protected layout at mobile/app/(protected)/_layout.tsx uses expo-router's `Tabs` component which crashes with NativeWind v4 due to CSS interop boolean→string conversion. Replace with `Slot` + custom Pressable tab bar.\n\nModify mobile/app/(protected)/_layout.tsx:\n- Remove `Tabs` import from expo-router, import `Slot` instead.\n- Import `{ Pressable }` from react-native, `{ usePathname, useRouter }` from expo-router.\n- Keep the `useAuth()` auth guard and loading spinner logic unchanged.\n- Build a custom tab bar component below the Slot:\n  - Create a `tabs` array: `[{name:'home',icon:'home-outline',label:'Home',path:'/(protected)/(tabs)'}, {name:'mewing',icon:'fitness-outline',label:'Mewing',path:'/(protected)/mewing'}, {name:'progress',icon:'images-outline',label:'Progress',path:'/(protected)/progress'}, {name:'settings',icon:'settings-outline',label:'Settings',path:'/(protected)/settings'}]`.\n  - Render `<View className=\"flex-1\"><Slot /><View className=\"flex-row border-t border-gray-100 bg-white pb-8 pt-2\">` with 4 Pressable tabs.\n  - Each Pressable: `onPress={() => { hapticSelection(); router.push(tab.path); }}` with `className=\"flex-1 items-center py-2\"`.\n  - Ionicons icon + Text label, colored `#2563eb` when active (match pathname), `#9ca3af` when inactive.\n  - Determine active by checking `pathname.includes(tab.name)` or exact match for home.\n- Remove ALL `<Tabs.Screen>` configurations.\n\nFiles to modify:\n- mobile/app/(protected)/_layout.tsx\n\nNO new packages needed. Uses existing: expo-router Slot, Pressable, Ionicons, haptics.",
      "status": "pending",
      "priority": 9,
      "depends_on": [],
      "test_command": "cd mobile && npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "2026-02-07T00:00:00Z",
      "updated_at": "2026-02-07T00:00:00Z"
    },
    {
      "id": "enhance_006",
      "title": "Mobile: Home Screen — Replace All Mocks with Real Backend API Calls",
      "description": "The home screen at mobile/app/(protected)/(tabs)/index.tsx has ALL data hardcoded: latestScore=7.5, totalScans=12, streak=7, trend=0.3, mock recommendations array, and a fake scan flow with setTimeout.\n\nReplace with real backend integration:\n\n1. Add state: `isLoading`, `error`, `remainingUses`.\n2. On mount via useEffect, call 3 endpoints in parallel:\n   - `api.get('/analyses/stats')` → sets totalScans, averageScoreTrend\n   - `api.get('/analyses/latest')` → sets latestScore from response.data.data.overall_score\n   - `api.get('/mewing/streaks')` → sets streak from response.data.data.current_streak\n   - `api.get('/usage/remaining')` → sets remainingUses\n   Wrap in try/catch, set error state on failure.\n3. Replace `handleScanFace` to actually upload and analyze:\n   - After camera capture `result.assets[0].uri`, convert to base64 using fetch+blob: `const response = await fetch(uri); const blob = await response.blob(); const reader = new FileReader(); reader.readAsDataURL(blob);`\n   - POST to `/analyses/ai` with `{ image_base64: base64String }`.\n   - On success, navigate to `/(protected)/analysis/${response.data.data.id}`.\n   - On 429 error (limit reached), show Alert with upgrade prompt.\n   - Remove the setTimeout mock entirely.\n4. Replace mock recommendations with API call: `api.get('/glow-plan')` → map response to `recommendations` state.\n5. Replace hardcoded MewingMiniCard props: call `api.get('/mewing/today')` and pass real `minutesToday` and `dailyGoal`.\n6. Add pull-to-refresh with RefreshControl on ScrollView.\n7. Show remaining scans badge near scan button: `{remainingUses} scans left today`.\n\nFiles to modify:\n- mobile/app/(protected)/(tabs)/index.tsx",
      "status": "pending",
      "priority": 8,
      "depends_on": ["enhance_004"],
      "test_command": "cd mobile && npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "2026-02-07T00:00:00Z",
      "updated_at": "2026-02-07T00:00:00Z"
    },
    {
      "id": "enhance_007",
      "title": "Mobile: Analysis Detail Screen — Replace Mock Data with Real API + User Photo",
      "description": "The analysis detail screen at mobile/app/(protected)/analysis/[id].tsx uses entirely hardcoded mock data: score 8.4, Unsplash stock photo, fake feature scores, and a setTimeout to simulate loading.\n\nReplace with real backend integration:\n\n1. Remove the entire mock data block (lines 36-64 setTimeout with hardcoded object).\n2. In useEffect, call `api.get(`/analyses/${id}`)` to fetch real analysis.\n3. Map backend response to AnalysisData interface:\n   - `response.data.data.overall_score` → overallScore\n   - `response.data.data.image_url` → imageUri (the real user photo, or empty placeholder)\n   - `response.data.data.symmetry_score` → scores.symmetry, etc. for all 7 scores\n   - `response.data.data.strengths` → strengths (string array from AI)\n   - `response.data.data.improvements` → improvements (string array from AI)\n4. Add error state: if fetch fails, show retry button with `<TouchableOpacity onPress={loadAnalysis} className=\"bg-blue-600 px-6 py-3 rounded-xl mt-4\"><Text className=\"text-white font-semibold\">Retry</Text></TouchableOpacity>`.\n5. Fix broken navigation:\n   - Line 159: Change `/(protected)/plan` to `/(protected)/glow-plan`.\n   - Line 166: Change `/(protected)/scan` to `/(protected)/(tabs)` (back to home where scan button is).\n6. Handle missing image: if `imageUri` is empty, show a purple gradient placeholder with Ionicons `person` icon instead of broken Image.\n7. Add haptic feedback: `hapticSelection()` on back button press, `hapticSuccess()` on share.\n\nFiles to modify:\n- mobile/app/(protected)/analysis/[id].tsx",
      "status": "pending",
      "priority": 7,
      "depends_on": ["enhance_004"],
      "test_command": "cd mobile && npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "2026-02-07T00:00:00Z",
      "updated_at": "2026-02-07T00:00:00Z"
    },
    {
      "id": "enhance_008",
      "title": "Mobile: Glow Plan Screen — Replace Mock Data with Real Backend API",
      "description": "The glow plan screen at mobile/app/(protected)/glow-plan.tsx has a hardcoded `mockRecommendations` array of 5 items and a fake regenerate flow with setTimeout.\n\nReplace with real backend integration:\n\n1. Remove the entire `mockRecommendations` constant (lines 17-69).\n2. Add states: `isLoading: true`, `error: string | null`.\n3. On mount useEffect, call `api.get('/glow-plan')` to load real recommendations:\n   - Map response: `response.data.data` → array of Recommendation objects.\n   - Each item: `{ id, category, title, description, difficulty, timeframeWeeks: timeframe_weeks, priority, completed }`.\n   - If response is empty array, show attractive empty state: Ionicons `sparkles-outline` + `Your glow plan will appear after your first face scan` text + button to go scan.\n4. Replace `handleRegeneratePlan` (lines 101-133):\n   - Remove the setTimeout simulation entirely.\n   - Call `api.post('/glow-plan/generate')` with no body (backend uses latest analysis).\n   - On success, replace recommendations state with new response data.\n   - Keep the Alert.alert confirmation before regenerating.\n5. Replace `handleToggleComplete` to call backend:\n   - Call `api.put(`/glow-plan/${id}/complete`)` to mark complete/incomplete.\n   - Optimistically update local state, revert on error.\n6. Add loading skeleton while fetching: show 3 placeholder cards with `bg-gray-200 animate-pulse rounded-xl h-24 mx-5 mb-3`.\n7. Add pull-to-refresh: wrap ScrollView with RefreshControl, re-fetch on pull.\n8. Add haptic feedback to category filter buttons and recommendation card toggles.\n\nFiles to modify:\n- mobile/app/(protected)/glow-plan.tsx",
      "status": "pending",
      "priority": 7,
      "depends_on": ["enhance_004"],
      "test_command": "cd mobile && npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "2026-02-07T00:00:00Z",
      "updated_at": "2026-02-07T00:00:00Z"
    },
    {
      "id": "enhance_009",
      "title": "Mobile: Delete Placeholder home.tsx + Fix Mewing Weekly Calendar",
      "description": "Two fixes in one task:\n\n1. DELETE mobile/app/(protected)/home.tsx — this is the 'App Factory' Phase 0 Master Template placeholder file. It contains text 'App Factory', 'Your MVP starts here', 'This is the Phase 0 Master Template' which will cause IMMEDIATE App Store rejection (Guideline 2.1). The real home screen is at mobile/app/(protected)/(tabs)/index.tsx. Delete this file entirely.\n\n2. FIX mewing weekly calendar in mobile/app/(protected)/mewing.tsx:\n   - Line 29: `weeklyData` is hardcoded `[false, false, false, false, false, false, false]`.\n   - In the `loadData` function, add a call to `api.get('/mewing/history?days=7')` to fetch last 7 days of mewing data.\n   - Map the response to the weeklyData boolean array: for each of the last 7 days (Mon-Sun), check if the user logged any mewing minutes that day. If `mewing_minutes > 0`, set that day to `true`.\n   - The backend endpoint GET /mewing/history already exists and returns `{data: {entries: [{date, mewing_minutes, ...}]}}`.\n   - Calculate which days of the current week have entries by comparing dates.\n   - Example: `const today = new Date(); const weekStart = new Date(today); weekStart.setDate(today.getDate() - today.getDay() + 1);` then check each day.\n3. Add error handling to mewing screen: replace `console.log('Failed to load mewing data')` at line 59 with a proper error state + retry button.\n4. Add RefreshControl to the ScrollView for pull-to-refresh.\n\nFiles to modify:\n- mobile/app/(protected)/home.tsx (DELETE)\n- mobile/app/(protected)/mewing.tsx",
      "status": "pending",
      "priority": 8,
      "depends_on": [],
      "test_command": "cd mobile && npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "2026-02-07T00:00:00Z",
      "updated_at": "2026-02-07T00:00:00Z"
    },
    {
      "id": "enhance_010",
      "title": "Mobile: 3-Screen Onboarding Flow with Smart Routing",
      "description": "Create a 3-screen onboarding flow and update the root index.tsx to check onboarding status before routing.\n\nCreate mobile/app/(onboarding)/_layout.tsx:\n- Import `Slot` from expo-router (NOT Stack).\n- Simple layout: `<View className=\"flex-1 bg-white\"><Slot /></View>`.\n\nCreate mobile/app/(onboarding)/welcome.tsx (Screen 1):\n- Full-screen with large Ionicons `sparkles` icon (size 80, color #2563eb).\n- Title: `Welcome to Mewify` (text-3xl font-bold text-gray-900 text-center).\n- Subtitle: `Your AI-powered glow-up companion` (text-lg text-gray-500 text-center mt-3).\n- Three feature pills: `AI Face Analysis`, `Mewing Tracker`, `Glow Plan`.\n- Bottom: `Get Started` button (bg-blue-600 rounded-2xl py-4 mx-8) → navigate to `/(onboarding)/features`.\n- Page indicator dots at bottom (3 dots, first active blue-600).\n\nCreate mobile/app/(onboarding)/features.tsx (Screen 2):\n- Three feature cards vertically stacked:\n  - Card 1: camera icon + `AI Face Scanning` + `Get detailed analysis of your facial features`\n  - Card 2: fitness icon + `Mewing Tracker` + `Track daily practice and build streaks`\n  - Card 3: sparkles icon + `Glow Plan` + `Personalized recommendations for your glow-up`\n- Each card: `bg-blue-50 rounded-2xl p-5 mb-4 mx-8`.\n- Bottom: `Continue` button → navigate to `/(onboarding)/start`.\n\nCreate mobile/app/(onboarding)/start.tsx (Screen 3):\n- Big CTA screen with gradient-like styling.\n- Title: `Ready to glow up?`\n- Two buttons:\n  - `Try Free — 3 Scans/Day` (bg-blue-600 text-white rounded-2xl py-4 mx-8) → sets onboarding complete in AsyncStorage, routes to `/(auth)/login`.\n  - `Sign In` (text-blue-600 mt-4) → sets onboarding complete, routes to `/(auth)/login`.\n- Use `import AsyncStorage from '@react-native-async-storage/async-storage'` — WAIT, this package is NOT in package.json. Use `expo-secure-store` instead: `SecureStore.setItemAsync('onboarding_complete', 'true')`.\n\nModify mobile/app/index.tsx:\n- Before auth check, check `SecureStore.getItemAsync('onboarding_complete')`.\n- If null → redirect to `/(onboarding)/welcome`.\n- If complete + authenticated → redirect to `/(protected)/(tabs)`.\n- If complete + not authenticated → redirect to `/(auth)/login`.\n- Add hapticSelection() to all buttons.\n\nFiles to create:\n- mobile/app/(onboarding)/_layout.tsx\n- mobile/app/(onboarding)/welcome.tsx\n- mobile/app/(onboarding)/features.tsx\n- mobile/app/(onboarding)/start.tsx\n\nFiles to modify:\n- mobile/app/index.tsx",
      "status": "pending",
      "priority": 8,
      "depends_on": [],
      "test_command": "cd mobile && npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "2026-02-07T00:00:00Z",
      "updated_at": "2026-02-07T00:00:00Z"
    },
    {
      "id": "enhance_011",
      "title": "Mobile: Share Button — Use Real React Native Share API",
      "description": "The ShareButton at mobile/components/analysis/ShareButton.tsx only copies text to clipboard using expo-clipboard. It should use the real React Native Share API for proper iOS sharing (Messages, Instagram, etc.).\n\nModify mobile/components/analysis/ShareButton.tsx:\n1. Import `{ Share }` from 'react-native' (already available, no new package).\n2. Replace `handleShare` function:\n   - Build share text: `I just scanned my face on Mewify! ✨\\n\\nMy Glow Score: ${analysisData.overallScore}/10\\n\\nTop Strengths:\\n${analysisData.strengths.map(s => '• ' + s).join('\\n')}\\n\\nGet your analysis at mewify.app`\n   - Call `await Share.share({ message: shareText, title: 'My Mewify Score' })`.\n   - On success (result.action !== Share.dismissedAction), show brief `Shared!` state.\n   - Keep clipboard as fallback: if Share fails, fall back to `Clipboard.setStringAsync(shareText)`.\n3. Update button styling:\n   - Change icon to `share-outline` (iOS native share icon).\n   - Text: `Share My Score`.\n   - Add hapticSuccess() after successful share.\n4. Also update the ShareButton props interface to accept `imageUri?: string` for future image sharing.\n\nFiles to modify:\n- mobile/components/analysis/ShareButton.tsx",
      "status": "pending",
      "priority": 6,
      "depends_on": [],
      "test_command": "cd mobile && npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "2026-02-07T00:00:00Z",
      "updated_at": "2026-02-07T00:00:00Z"
    },
    {
      "id": "enhance_012",
      "title": "Mobile: Add Missing Haptic Feedback to All Interactive Elements",
      "description": "Several interactive elements are missing haptic feedback, violating Apple Guideline 4.2 and the project's requirement for haptics on ALL interactive elements.\n\nAdd haptic feedback to these elements:\n\n1. mobile/components/home/MewingMiniCard.tsx:\n   - Import `{ hapticSelection }` from '../../lib/haptics'.\n   - Add `hapticSelection()` to the TouchableOpacity `onPress` at the `Log Session` button.\n\n2. mobile/components/home/GlowPlanPreview.tsx:\n   - Import `{ hapticSelection }` from '../../lib/haptics'.\n   - Add `hapticSelection()` to the `View All` TouchableOpacity onPress.\n\n3. mobile/components/glow-plan/CategoryFilter.tsx:\n   - Import `{ hapticSelection }` from '../../lib/haptics'.\n   - Add `hapticSelection()` inside the onPress handler of each category TouchableOpacity: `onPress={() => { hapticSelection(); onSelectCategory(category); }}`.\n\n4. mobile/components/glow-plan/RecommendationCard.tsx:\n   - Import `{ hapticSelection, hapticSuccess }` from '../../lib/haptics'.\n   - Add `hapticSelection()` to `handlePress` (card expand/collapse).\n   - Add `hapticSuccess()` to `handleCheckboxPress` when marking complete.\n\n5. mobile/app/(protected)/analysis/[id].tsx:\n   - Import `{ hapticSelection }` from '../../lib/haptics'.\n   - Add `hapticSelection()` to the back button TouchableOpacity.\n   - Add `hapticSelection()` to `View Your Glow Plan` button.\n   - Add `hapticSelection()` to `Scan Again` button.\n\n6. mobile/app/(protected)/progress.tsx:\n   - Add `hapticSelection()` to individual photo press in `handlePhotoPress`.\n   - Add `hapticSelection()` to `Take First Scan` button in empty state.\n\nFiles to modify:\n- mobile/components/home/MewingMiniCard.tsx\n- mobile/components/home/GlowPlanPreview.tsx\n- mobile/components/glow-plan/CategoryFilter.tsx\n- mobile/components/glow-plan/RecommendationCard.tsx\n- mobile/app/(protected)/analysis/[id].tsx\n- mobile/app/(protected)/progress.tsx",
      "status": "pending",
      "priority": 6,
      "depends_on": [],
      "test_command": "cd mobile && npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "2026-02-07T00:00:00Z",
      "updated_at": "2026-02-07T00:00:00Z"
    },
    {
      "id": "enhance_013",
      "title": "Mobile: Progress Screen — Add Pull-to-Refresh + Error State + Empty State Polish",
      "description": "The progress screen at mobile/app/(protected)/progress.tsx has good backend integration but needs UX polish.\n\n1. Add pull-to-refresh:\n   - Import `{ RefreshControl }` from 'react-native'.\n   - Add `isRefreshing` state.\n   - Add `<RefreshControl refreshing={isRefreshing} onRefresh={handleRefresh} tintColor=\"#2563eb\" />` to ScrollView.\n   - `handleRefresh`: set isRefreshing true, await loadAnalyses(), set isRefreshing false.\n\n2. Add error state:\n   - Add `error` state variable.\n   - In loadAnalyses catch block (line 87-89), replace `console.log` with `setError('Failed to load your progress. Please try again.')`.\n   - Render error view: `<View className=\"items-center py-16\"><Ionicons name=\"cloud-offline-outline\" size={48} color=\"#ef4444\" /><Text className=\"text-red-500 mt-4 text-center\">{error}</Text><TouchableOpacity onPress={loadAnalyses} className=\"mt-4 bg-blue-600 px-6 py-3 rounded-xl\"><Text className=\"text-white font-semibold\">Retry</Text></TouchableOpacity></View>`.\n\n3. Add loading state:\n   - Add `isLoading` state, set true initially.\n   - While loading, show 4 placeholder skeleton cards: `<View className=\"w-[48%] mb-3 rounded-xl bg-gray-200 aspect-square\" />` in a flex-row.\n\n4. Polish empty state:\n   - Add subtitle below icon: `Track your glow-up journey over time`.\n   - Add hapticSelection() to the `Take First Scan` button.\n\n5. Add score badge colors:\n   - Score >= 8: green-600 text.\n   - Score >= 6: blue-600 text.\n   - Score < 6: amber-600 text.\n\nFiles to modify:\n- mobile/app/(protected)/progress.tsx",
      "status": "pending",
      "priority": 6,
      "depends_on": [],
      "test_command": "cd mobile && npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "2026-02-07T00:00:00Z",
      "updated_at": "2026-02-07T00:00:00Z"
    },
    {
      "id": "enhance_014",
      "title": "Mobile: Login Screen — Add Guest Mode Skip Button",
      "description": "Apple Guideline 5.1.1v requires apps to work without forcing login. Add a 'Skip for now' guest option to the login screen.\n\nModify mobile/app/(auth)/login.tsx:\n1. Add a 'Skip for now' link below the Sign Up link:\n   - `<TouchableOpacity onPress={handleGuestMode} className=\"mt-4 py-2\"><Text className=\"text-center text-gray-400 text-sm\">Skip for now — Try 3 free scans</Text></TouchableOpacity>`.\n2. `handleGuestMode` function:\n   - Import `{ setItemAsync } from 'expo-secure-store'`.\n   - Set `await setItemAsync('guest_mode', 'true')`.\n   - Import `{ hapticSelection }` and call it.\n   - Navigate to `/(protected)/(tabs)` using `router.replace('/(protected)/(tabs)')`.\n3. Import `useRouter` from expo-router.\n\nModify mobile/app/(protected)/_layout.tsx (or the custom tab bar from enhance_005):\n- Update the auth guard: allow access if `isAuthenticated` OR if guest mode is enabled.\n- Check guest mode: `const [isGuest, setIsGuest] = useState(false); useEffect(() => { SecureStore.getItemAsync('guest_mode').then(v => setIsGuest(v === 'true')); }, []);`\n- Only redirect to login if `!isAuthenticated && !isGuest`.\n\nModify mobile/app/(protected)/(tabs)/index.tsx:\n- Before AI scan, check if guest: if guest, check usage count from SecureStore (`guest_scan_count`). If >= 3, show Alert prompting login/register. If < 3, increment and allow.\n\nModify mobile/contexts/AuthContext.tsx:\n- Add `isGuest` boolean to context.\n- Expose a `clearGuestMode` function that removes the SecureStore key.\n\nFiles to modify:\n- mobile/app/(auth)/login.tsx\n- mobile/app/(protected)/_layout.tsx\n- mobile/app/(protected)/(tabs)/index.tsx\n- mobile/contexts/AuthContext.tsx",
      "status": "pending",
      "priority": 7,
      "depends_on": ["enhance_005"],
      "test_command": "cd mobile && npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "2026-02-07T00:00:00Z",
      "updated_at": "2026-02-07T00:00:00Z"
    },
    {
      "id": "enhance_015",
      "title": "Mobile: Settings Screen — Add Privacy Policy + App Version + Improve UX",
      "description": "The settings screen at mobile/app/(protected)/settings.tsx needs additional sections for App Store compliance and user engagement.\n\n1. Add 'About' section after Purchases:\n   - Section title: `ABOUT` (same uppercase gray style as other sections).\n   - Privacy Policy link: `<Pressable onPress={() => Linking.openURL('https://mewify.app/privacy')} className=\"p-4 border-b border-gray-100\"><Text className=\"text-base font-medium text-blue-600\">Privacy Policy</Text></Pressable>`.\n   - Terms of Service link: same pattern with `https://mewify.app/terms`.\n   - App version: `<View className=\"p-4\"><Text className=\"text-base font-medium text-gray-900\">Version</Text><Text className=\"text-sm text-gray-500 mt-0.5\">1.0.0</Text></View>`.\n   Import `Linking` from 'react-native'.\n\n2. Add subscription status display in Account section:\n   - Below email, show: `<View className=\"mt-2\"><Text className=\"text-sm text-gray-500\">Plan</Text><Text className=\"text-base font-medium text-blue-600\">Free (3 scans/day)</Text></View>`.\n   - This is static for now; real subscription status from RevenueCat will come later.\n\n3. Add haptic feedback to all Pressable elements:\n   - Import `hapticSelection` from haptics.\n   - Sign Out button: `onPress={() => { hapticSelection(); logout(); }}`.\n   - Restore Purchases: already has hapticMedium (keep it).\n   - Privacy Policy: add hapticSelection.\n   - Terms: add hapticSelection.\n\n4. Add ScrollView wrapper:\n   - Wrap the content in `<ScrollView showsVerticalScrollIndicator={false}>` since content may overflow on smaller devices.\n\nFiles to modify:\n- mobile/app/(protected)/settings.tsx",
      "status": "pending",
      "priority": 6,
      "depends_on": [],
      "test_command": "cd mobile && npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "2026-02-07T00:00:00Z",
      "updated_at": "2026-02-07T00:00:00Z"
    },
    {
      "id": "enhance_016",
      "title": "Mobile: Root Layout — Add Slot for NativeWind v4 Compatibility",
      "description": "The root layout at mobile/app/_layout.tsx uses expo-router's `Stack` component which can cause NativeWind v4 CSS interop crashes (boolean→string conversion). Replace with `Slot` for safety.\n\nModify mobile/app/_layout.tsx:\n1. Replace `import { Stack } from 'expo-router'` with `import { Slot } from 'expo-router'`.\n2. Replace `<Stack screenOptions={{ headerShown: false }} />` with `<Slot />`.\n3. Keep everything else unchanged: the `'../global.css'` import, `AuthProvider` wrapper, and `StatusBar`.\n\nThis is a minimal change but critical for NativeWind v4 stability. The `Slot` component from expo-router renders the current child route without adding any navigation chrome, which is exactly what we want since `headerShown: false` was already set.\n\nFiles to modify:\n- mobile/app/_layout.tsx",
      "status": "pending",
      "priority": 9,
      "depends_on": [],
      "test_command": "cd mobile && npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "2026-02-07T00:00:00Z",
      "updated_at": "2026-02-07T00:00:00Z"
    },
    {
      "id": "enhance_017",
      "title": "Mobile: Register Screen — Auto-Login After Registration",
      "description": "The register screen at mobile/app/(auth)/register.tsx already calls AuthContext.register which saves tokens and sets user, so auto-login works. But the screen needs UX improvements:\n\n1. The register function in AuthContext.tsx already does auto-login (line 73-86) by saving tokens and calling setUser. Verify this works by checking navigation: after register succeeds, index.tsx should detect isAuthenticated=true and redirect to protected area. This should already work but needs validation.\n\n2. Add 'Skip for now' guest option (same as login screen):\n   - Add below the 'Already have an account?' link:\n   - `<TouchableOpacity onPress={handleGuestMode} className=\"mt-4 py-2\"><Text className=\"text-center text-gray-400 text-sm\">Skip for now — Try 3 free scans</Text></TouchableOpacity>`.\n   - Same handleGuestMode as login screen (set SecureStore guest_mode=true, navigate to protected).\n\n3. Add password strength indicator:\n   - Below password confirmation field, show strength indicator.\n   - Simple logic: length < 6 → red 'Weak', length < 10 → amber 'Medium', length >= 10 with mix → green 'Strong'.\n   - Render as colored bar + text below the field.\n   - `<View className=\"mt-1 flex-row items-center\"><View className={`h-1 flex-1 rounded-full ${strengthColor}`} /><Text className={`ml-2 text-xs ${strengthTextColor}`}>{strengthLabel}</Text></View>`.\n\n4. Add haptic feedback: hapticSelection() on 'Skip for now' and 'Sign In' link.\n\nFiles to modify:\n- mobile/app/(auth)/register.tsx",
      "status": "pending",
      "priority": 6,
      "depends_on": ["enhance_014"],
      "test_command": "cd mobile && npx tsc --noEmit",
      "auto_commit": true,
      "created_at": "2026-02-07T00:00:00Z",
      "updated_at": "2026-02-07T00:00:00Z"
    }
  ]
}
